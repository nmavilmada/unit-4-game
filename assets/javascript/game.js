// set styles to change button color when pressed
var Styles = {
    color : "yellow" ,
    backgroundColor : "green" ,
    fontWeight: "bold",
}

// var MachineNumber = ""  
// random number generator for pc between 120 and 30
function PCRandomNum(){
    return Math.floor((Math.random() * 90) + 30);
}

// empty arrays to store values when each of the crystals are clicked
var crystalValues = [];
var crystalTotalValues = [];

// empty arrays to store win count and loss count
var wins = 0;
var losses = 0;
var machineNumber;


// Game is started by pressing the starGame button.
// When pressed button background and fonts will change color.
// Random Number stored in MachineNumber variable will be dispayed on the HTML page next to " Machine Number :"
// Call upon function "initialize()"

$(document).ready(function() {

    initialize();
    
    $(this).css(Styles); 
    $(this).css('backgroundColor','red');

    for (var i = 1; i <= crystalValues.length; i++) {

        $(`#crystal${i}`).click(function () {
            var clickedIndex = parseInt($(this).attr('index')) -1;
            var currentCrystalValue = crystalValues[clickedIndex];
            crystalTotalValues[clickedIndex] = crystalTotalValues[clickedIndex] + currentCrystalValue;
            return calcGrandTotal();
            // return;
        });

    }

});

// declare function called "initialize"
function initialize() {
     
     crystalValues = [];
     crystalTotalValues = [];

     machineNumber = PCRandomNum();

     $(".compNumber").html("Machine Number : " + machineNumber);

    // create a for loop that will perform four iterations
    // generate a random number and assign it to "randomNumber"
    for (var i = 1; i <= 4; i++) {
        
        var randomNumber = Math.floor((Math.random() * 12) + 1);

        // for button ids crystal1, crystal2,crystal3 and crystal4 attribute an index # from 1 to 4
        // push the 4 random numbers generated from the iteration to the array "crystalValues"
        // create an arryay with four zeros as place holders inside array "crystalTotalValues"

        $(`#crystal${i}`).attr('index', i);
        crystalValues.push(randomNumber);
        crystalTotalValues.push(0);

        // when cystal [i] is clicked the index value associated with that crystal will get passed as an
        // integer to the variable "clickedIndex"
        // "-1" is used since "i" starts with 1 and the clickedIndex has to start from zero
        // crystalValues is an array of four elements
        // currentCrystalValue will store the crysalValues[i]  
        // this will add all 4 numbers generated by the crystals 
        // call upon the function clacGrandTotal
       
    }
}


function calcGrandTotal() {
    var grandTotal = 0;
    for ( var i = 0; i < crystalTotalValues.length; i++) {
        grandTotal = grandTotal + crystalTotalValues[i];
    }
    $(".grandTotal").html("Crystal Total : " + grandTotal );

    if(grandTotal === machineNumber){
        alert("you won")
        wins++ ; 
        $(".wincount").html ("Number of Wins : " + wins);
        initialize();
    }
    else if(grandTotal > machineNumber){
        alert("you lose")
        losses++;
        $(".lostcount").html("Number of Losses : " + losses);
        initialize();
    }
}
